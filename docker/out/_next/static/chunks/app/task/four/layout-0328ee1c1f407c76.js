(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[841],{153:function(e,t,i){Promise.resolve().then(i.bind(i,61629))},61629:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var a=i(57437),r=i(2265),d=i(62586),l=i(45867),n=i(67098),s=i(42465);i(22054);var o=i(91150),p=i(71169),c=e=>{var t;let i=(0,r.useContext)(o.Z);console.log("dataLocalContext",i);let c=void 0!=(0,p.useSearchParams)().get("pid"),u=[{title:"任务编码",dataIndex:"code",key:"code",width:"10%"},{title:"任务名称",dataIndex:"name",key:"name",width:"20%"},{title:"任务状态",dataIndex:"state",width:"10%",key:"state",filtered:c&&i.taskState.length>0,defaultFilteredValue:i.taskState.split(","),onFilter:(e,t)=>{if(0===i.taskState.length)return!0;var a=i.taskState.split(",");return console.log("dataLocalContextTaskStateList",i.taskState.length>0,a),void 0!=n.g.filter(e=>a.includes(e.code)).find(e=>e.name===t.state)}},{title:"优先级",dataIndex:"priority",width:"10%",key:"priority",hidden:!0,filters:n.Lu.map(e=>({text:e.name,value:e.code})),filtered:!0,defaultFilteredValue:[e.priority],onFilter:(t,i)=>(console.log("&record.priority.toString()===props.priority",i.priority,t,e.priority,e.priority===i.priority),e.priority===i.priority+"")},{title:"期望开始时间",dataIndex:"expectedStartTime",width:"10%",key:"expectedStartTime",filtered:c&&i.expectedStartTime.length>0,onFilter:(e,t)=>{if(console.log("dataLocalContext.expectedStartTime",i.expectedStartTime),0===i.expectedStartTime.length)return!0;let a=JSON.parse(i.expectedStartTime);if(console.log("expectStartTimeParseResult",a),void 0!=a[0]){let e;if(!(e="<="===a[0].operateType?void 0!=t.expectedStartTime&&t.expectedStartTime<=a[0].value:void 0!=t.expectedStartTime&&t.expectedStartTime>=a[0].value))return e}if(void 0!=a[1]){let e=void 0!=t.expectedStartTime&&t.expectedStartTime<=a[1].value;if(!e)return e}return!0}},{title:"操作",dataIndex:"action",width:"10%",key:"action"}];return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.ZP,{theme:{components:{Table:{headerBg:null===(t=n.Lu.find(t=>t.code===e.priority))||void 0===t?void 0:t.color}}},children:(0,a.jsx)(l.Z,{columns:u,dataSource:e.resultDataTypeList.filter(t=>{if(t.action=(0,a.jsx)(s.Z,{itemId:t.id,pid:t.pid,pPid:t.pPid,refreshDate:e.refreshDate}),0===i.expectedStartTime.length)return!0;let r=JSON.parse(i.expectedStartTime);if(void 0!=r[0]){let e;if(!(e="<="===r[0].operateType?void 0!=t.expectedStartTime&&t.expectedStartTime<=r[0].value:void 0!=t.expectedStartTime&&t.expectedStartTime>=r[0].value))return e}if(void 0!=r[1]){let e=void 0!=t.expectedStartTime&&t.expectedStartTime<=r[1].value;if(!e)return e}return!0}),pagination:{pageSize:5},scroll:{y:280}})})})};function u(e){let{children:t}=e,[i,d]=(0,r.useState)([]),l=()=>{(0,n.GD)(JSON.stringify({pageSize:1e3,pageNumber:1,data:u})).then(e=>{e.status.success&&(e.data.content.forEach(e=>{var t;e.state=null===(t=n.g.find(t=>t.code===e.state+""))||void 0===t?void 0:t.name}),d(e.data.content))})};(0,r.useEffect)(()=>{let e=document.getElementById("tenUp").offsetWidth;document.getElementById("upUp").style.fontSize=e+"px",document.getElementById("upDown").style.fontSize=e+"px";let t=document.getElementById("left").offsetHeight;document.getElementById("tenLeft").style.fontSize=t/6*4+"px",l()},[(0,r.useContext)(o.Z)]);let s=(0,r.useContext)(o.Z),u=[];var f=(0,p.useSearchParams)().get("pid");if(console.log("data",s),console.log("pid!=null",null!=f),null!=f)u.push({name:"pid",value:f,operateType:"="},{name:"TREE",value:"false",operateType:"TREE"});else if(s.taskState.length>0&&u.push({name:"state",value:s.taskState,operateType:"IN"}),s.expectedStartTime.length>0){let e=JSON.parse(s.expectedStartTime);u.push(...e)}return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"firstRow",style:{display:"flex"},children:[(0,a.jsx)("div",{className:"leftUp",children:(0,a.jsx)(c,{refreshDate:l,priority:"3",resultDataTypeList:i})}),(0,a.jsx)("div",{id:"tenUp",className:"up",children:(0,a.jsx)("span",{id:"upUp",children:"向上重要"})}),(0,a.jsx)("div",{className:"rightUp",children:(0,a.jsx)(c,{refreshDate:l,priority:"2",resultDataTypeList:i})})]}),(0,a.jsx)("div",{id:"left",className:"left",children:(0,a.jsx)("span",{id:"tenLeft",style:{fontSize:"1vh"},children:"←向左紧急←向左紧急←向左←向左紧急←向左紧急←向左紧急"})}),(0,a.jsxs)("div",{className:"secondRow",style:{display:"flex"},children:[(0,a.jsx)("div",{className:"leftDown",children:(0,a.jsx)(c,{refreshDate:l,priority:"1",resultDataTypeList:i})}),(0,a.jsx)("div",{className:"up",children:(0,a.jsx)("span",{id:"upDown",children:"向上重要"})}),(0,a.jsx)("div",{className:"rightDown",children:(0,a.jsx)(c,{refreshDate:l,priority:"0",resultDataTypeList:i})})]})]})}i(45820)},91150:function(e,t,i){"use strict";let a=i(2265).createContext({taskState:"",expectedStartTime:"",refreshData:!0});t.Z=a},45820:function(){}},function(e){e.O(0,[412,167,231,186,465,971,23,744],function(){return e(e.s=153)}),_N_E=e.O()}]);